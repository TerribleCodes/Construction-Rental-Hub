<!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
  
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
  
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    
    <title>React App</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    
  </body>
</html> -->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Point Of Sale</title>
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/core.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/components.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/icons.css" rel="stylesheet" type="text/css" />    
    <link href="assets/css/responsive.css" rel="stylesheet" type="text/css" />
    <link href="assets/plugins/chosen/chosen.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/plugins/daterangepicker/daterangepicker.css" rel="stylesheet" type="text/css" />    
    <link href="assets/plugins/dataTables/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/plugins/dataTables/dataTables.bootstrap.min.css" rel="stylesheet" type="text/css" />    
    <link href="assets/css/pages.css" rel="stylesheet" type="text/css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- script for search the product in main page -->
    <script>
        $(document).ready(function () {
            $('#search').on('input', function () {
                var searchTerm = $(this).val().toLowerCase();
                
                // Show or hide product containers based on search term
                $('.col-md-2').each(function() {
                    var productText = $(this).find('.centered-text').text().toLowerCase();
                    if (productText.includes(searchTerm)) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            });
    
            // Add click event handler for the image buttons
            $('.image-button').on('click', function (e) {
                // Handle the image button click here
                e.preventDefault(); // Prevent the default link behavior if needed
                // Your code to handle the click event goes here
            });
        });
    </script>
   
      
      



    </head>
  <body>
    
  <div class="main_app">
  <div id="root"></div>

  <div id="loading"></div>
  <div class="container">
        <div class="row">
                <div class="col-sm-12">

                    <div class="button-list pull-left m-t-15 m-l-10">  
                        
                            <div class="btn-group p_one">
                            <button id="productModal" data-toggle="modal" data-target="#Products" type="button" class="btn btn-default waves-effect waves-light">
                                    <span class="btn-label"><i class=" 	glyphicon glyphicon-barcode"></i> </span> Add Products   
                            </button>
                            <button id="newProductModal" data-toggle="modal" data-target="#newProduct" type="button" class="btn btn-warning waves-effect waves-light">
                                    <i class="fa fa-plus"></i> 
                            </button>
                            </div>

                            <div class="btn-group p_two">
                            <button id="categoryModal" data-toggle="modal" data-target="#Categories" type="button" class="btn btn-default waves-effect waves-light">
                                    <span class="btn-label"><i class="glyphicon glyphicon-th"></i> </span>  Categories   
                            </button>
                            <button id="newCategoryModal" data-toggle="modal" data-target="#newCategory" type="button" class="btn btn-warning waves-effect waves-light">
                                <i class="fa fa-plus"></i> 
                            </button>
                            </div>
                   
                            <button id="viewRefOrders" data-toggle="modal" data-target="#holdOrdersModal" type="button" class="btn btn-info waves-effect waves-light">
                                    <span class="btn-label"><i class="fa fa-shopping-basket"></i> </span> Open Tabs
                            </button>
            
                            <button id="viewCustomerOrders" data-toggle="modal" data-target="#customerModal" type="button" onclick="$(this).getCustomerOrders()" class="btn btn-info waves-effect waves-light">
                                    <span class="btn-label"><i class="fa fa-user"></i> </span> Customer Orders
                            </button>
                        
                    </div>



                    
                    <!-- <img  class="loading m-t-5" style="margin-left: 35%" height="50px" src="assets/images/loading.gif" alt=""> -->

                    <div class="button-list pull-right m-t-15 m-l-10">  

                            <button id="settings" data-toggle="modal" data-target="#settingsModal"  type="button"  class="btn btn-default waves-effect waves-light p_five">
                                <i class="glyphicon glyphicon-cog"></i>
                          </button>

                            <button id="transactions" type="button" class="btn btn-default waves-effect waves-light p_three">
                            <span class="btn-label"><i class=" 	glyphicon glyphicon-credit-card"></i> </span>  Transactions 
                            </button>

                            <button id="pointofsale" type="button" class="btn btn-default waves-effect waves-light">
                                <span class="btn-label"><i class=" 	glyphicon glyphicon-shopping-cart"></i> </span>  Point of Sale
                            </button>

                            <div class="btn-group p_four">
                                <button id="usersModal" data-toggle="modal" data-target="#Users" type="button" class="btn btn-default waves-effect waves-light">
                                        <span class="btn-label"><i class=" 	glyphicon glyphicon-user"></i> </span>  Users  
                                </button>
                                <button id="add-user" data-toggle="modal"   type="button" class="btn btn-dark waves-effect waves-light">
                                        <i class="fa fa-plus"></i> 
                                </button>
                             </div>


                            <button type="button"  class="btn btn-light waves-effect waves-light" id="cashier">
                                <span class="btn-label"><i class="glyphicon glyphicon-user"></i> </span> <span id="loggedin-user"></span>
                         </button>

                            <button id="log-out"  type="button"  class="btn btn-warning waves-effect waves-light">
                                    <i class="glyphicon glyphicon-log-out"></i>
                            </button>
            
            
                            <button id="quit"  type="button" class="btn btn-danger waves-effect waves-light">
                                    <i class="glyphicon glyphicon-off"></i>
                            </button>
                        
                    </div>
        
                </div>
            </div>
            <br>

    <div id="transactions_view">
        <div class="row">
            <div class="col-md-12">
                <div class="card-box"> 
                    <div class="row">               
                        <h3 class="col-md-2">Transactions</h3> 
                        <div class="col-md-1">
                            <span>Till</span>
                            <select id="tills" class="form-control">                              
                            </select>
                        </div>
                        <div class="col-md-2">
                            <span>Cashier</span>
                            <select id="users" class="form-control">
                            </select>
                        </div>
                        <div class="col-md-1">
                            <span>Status</span>
                            <select id="status" class="form-control status">
                                <option value="1">Paid</option>
                                <option value="0">Unpaid</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <span style="width: 100%;">Date</span>
                            <div id="reportrange">
                                <i class="fa fa-calendar"></i>&nbsp;
                                <span></span> <i class="fa fa-caret-down"></i>
                            </div>
                        </div>
                    </div>   
                        <hr>
                        <div class="row">
                           

                            <div class="col-md-5">
                                <div class="row">
                                    <div class="col-md-8" id="productSales">
                                            <h4>Products</h4>
                                            <hr>
                                            <table class="table tablesaw-enhanced" id="productsSold">
                                                <thead>
                                                    <tr>
                                                        <th>Name</th>
                                                        <th>Sold</th>
                                                        <th>Available</th> 
                                                        <th>Sales</th>                                                                                                           
                                                    </tr>
                                                </thead>
                                                <tbody id="product_sales"></tbody>
                                            </table>
                                    </div>
                                    <div class="col-md-4" id="totals">
                                            <h4>Total</h4>
                                            <hr>
                                    
                                            <div id="total_sales" class="btn-success">
                                                <h5>SALES</h5>
                                                <div id="counter">0</div>
                                            </div>
                                       
                                            <div id="total_transactions" class="btn-warning">
                                                <h5>TRANSACTIONS</h5>
                                                <div id="counter">0</div>
                                            </div>
                                
                                            <div id="total_items" class="btn-info">
                                                <h5>ITEMS</h5>
                                                <div id="counter">0</div>
                                            </div>

                                            <div id="total_products" class="btn-default">
                                                <h5>PRODUCTS</h5>
                                                <div id="counter">0</div>
                                            </div>
                                                                         
                                    </div>
                                   
                               </div>
                           </div>

                           <div class="col-md-7">
                            <table class="table tablesaw-enhanced" id="transactionList">
                                <thead>
                                    <tr>                                                                      
                                        <th>Invoice</th>                                      
                                        <th>Date</th>
                                        <th>Total</th>
                                        <th>Paid</th>
                                        <th>Change</th>
                                        <th>Method</th>
                                        <th>Till</th>
                                        <th>Cashier</th>
                                        <th>View</th>
                                    </tr>
                                </thead>
                                <tbody id="transaction_list"></tbody>
                            </table>
                        </div>

                      </div>                    
                </div>
            </div>
        </div>
   </div>


   <div id="pos_view">
    <div class="row">
      <div class="col-md-4">
        <div class="card-box" id="card-box">
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-10">
                <!-- customer name will display here and the bill will be generated for this customer -->
                <div class="input-group m-t-5">
                  <form action="" id="searchBarCode">
                    <input
                      type="text"
                      required
                      id="skuCode"
                      name="skuCode"
                      class="form-control"
                      placeholder="Customer Name"
                      aria-label="Recipient's username"
                      aria-describedby="basic-addon2"
                    />
                    <input type="submit" style="display: none" />
                  </form>
                
                </div> 
                <!-- <h3>
                  Customize this part as add new customer button 
                </h3> -->
              </div>
              <div class="col-md-2">
                <button
                  data-toggle="modal"
                  data-target="#newCustomer"
                  class="btn btn-success"
                >
                  <i class="fa fa-plus"></i>
                </button>
              </div>
            </div>
            <!-- <div class="input-group m-t-5">
              <form action="" id="searchBarCode">
                <input
                  type="text"
                  required
                  id="skuCode"
                  name="skuCode"
                  class="form-control"
                  placeholder="Scan barcode or type the number then hit enter"
                  aria-label="Recipient's username"
                  aria-describedby="basic-addon2"
                />
                <input type="submit" style="display: none" />
              </form>
              <span class="input-group-addon" id="basic-addon2">
                <i class="glyphicon glyphicon-ok"></i>
              </span>
            </div> -->
          </div>
          <div  >
            <table class="table m-0" id="cartTable">
              <thead>
                <tr >
                  <th>#</th>
                  <th>Item Name</th>
                  <th>Qty</th>
                  <th>Price Per Item</th>
                  <th>Total</th>
                  <th width="5px">
                   
                  </th>
                </tr>
              </thead >
              <tbody  id="selected-products">
                   <!-- Selected products will be displayed here -->
              </tbody>
            </table>
          </div>
          <div>
          </div>

          <hr />
          <div class="m-t-5">
            <div class="row">
              <div class="col-md-3">Total Item(s)</div>
              <div class="col-md-3">: <span id="total">0</span></div>
              <div class="col-md-3">Price :</div>
              <div class="col-md-3"> <span id="price">0.0</span></div>
            </div>
            <div class="row">
              <div class="col-md-3">Advance Payment</div>
              <div class="col-md-3">
                <input
                  class="form-control"
                  type="number"
                  id="inputDiscount"
                  oninput="calculateCart();"
                />
              </div>
              <div class="col-md-3"><h3 id="gross_price">0.00</h3></div>
            </div>
          </div>
          

          <div class="button-list pull-right">
            <button
              onclick="$(this).submitDueOrder(3);"
              type="button"
              class="btn btn-info waves-effect waves-light"
            >
              <i class="fa fa-print"></i>
            </button>

            <button
              onclick="$(this).cancelOrder()"
              type="button"
              class="btn btn-danger waves-effect waves-light"
            >
              <span class="btn-label"><i class="fa fa-ban"></i></span
              >Cancel
            </button>

            <button
              type="button"
              id="hold"
              class="btn btn-default waves-effect waves-light"
            >
              <span class="btn-label"
                ><i class="fa fa-hand-paper-o"></i></span
              >Hold
            </button>

            <button
              type="button"
              id="payButton"
              class="btn btn-success waves-effect waves-light"
            >
              <span class="btn-label"><i class="fa fa-money"></i></span
              >Pay
            </button>
          </div>
          <hr />
        </div>
      </div>
      <div class="col-md-8">
        <div class="card-box">
          <div class="row">
            <div class="col-md-4">
              <input
                type="text"
                id="searchInput"
                class="form-control"
                placeholder="Search product by name"
              />
            </div>

            <div class="col-md-8">
              <div class="" id="categories"></div>
            </div>
          </div>
          <hr />
          <div style="height: 523px; overflow-y: auto;">
            <table class="table">
              <thead>
                <tr>
                  <th>Product Name</th>
                  <th>Product ID</th>
                  <th>Price</th>
                  <th>Stock</th>
                  <th>Quantity</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="productTable">
                <!-- You can dynamically generate rows for each product here using JavaScript -->
              </tbody>
            </table>

          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="dueModal" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="display: none;">
      <div class="modal-dialog modal-sm">
          <div class="modal-content">
              <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                  <h4 class="modal-title" id="mySmallModalLabel">Hold Order
                      <!-- <img  class="loading m-t-5" style="margin-left: 35%" height="50px" src="assets/images/loading.gif" alt=""> -->
                  </h4>
              </div>
              <div class="modal-body">
                  <form action="">
                      <input type="text" id="refNumber" placeholder="Enter a reference" class="form-control">
                  </form>
                  <hr>
                  <div class="row">
                      <div class="col-md-4">
                          <button onclick="$(this).go(1,true);" class="btn btn-success btn-lg btn-block">1</button>
                      </div>
                      <div class="col-md-4">
                          <button onclick="$(this).go(2,true);" class="btn btn-success btn-lg btn-block">2</button>
                      </div>
                      <div class="col-md-4">
                          <button onclick="$(this).go(3,true);" class="btn btn-success btn-lg btn-block">3</button>
                      </div>
                  </div>
                  <br>
                  <div class="row">
                      <div class="col-md-4">
                          <button onclick="$(this).go(4,true);" class="btn btn-success btn-lg btn-block">4</button>
                      </div>
                      <div class="col-md-4">
                          <button onclick="$(this).go(5,true);" class="btn btn-success btn-lg btn-block">5</button>
                      </div>
                      <div class="col-md-4">
                          <button onclick="$(this).go(6,true);" class="btn btn-success btn-lg btn-block">6</button>
                      </div>
                  </div>
                  <br>
                  <div class="row">
                      <div class="col-md-4">
                          <button onclick="$(this).go(7,true);" class="btn btn-success btn-lg btn-block">7</button>
                      </div>
                      <div class="col-md-4">
                          <button onclick="$(this).go(8,true);" class="btn btn-success btn-lg btn-block">8</button>
                      </div>
                      <div class="col-md-4">
                          <button onclick="$(this).go(9,true);" class="btn btn-success btn-lg btn-block">9</button>
                      </div>
                  </div>
                  <br>
                  <div class="row">
                      <div class="col-md-4">
                          <button onclick="$('#refNumber').val($('#refNumber').val().substr(0,$('#refNumber').val().length -1))" class="btn btn-success btn-lg btn-block">⌫</button>
                      </div>
                      <div class="col-md-4">
                          <button onclick="$(this).go(0,true);" class="btn btn-success btn-lg btn-block">0</button>
                      </div>
                      <div class="col-md-4">
                          <button onclick="$('#refNumber').val('')" class="btn btn-success btn-lg btn-block">AC</button>
                      </div>
                  </div>
              </div>
              <div class="modal-footer">
                  <button type="button" onclick="$(this).submitDueOrder(0);" class="btn btn-primary btn-block btn-lg waves-effect waves-light">Hold Order</button>
              </div>
  
          </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
  <!--  Modal content for the above example -->
  <div id="paymentModel" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
      <div class="modal-dialog modal-lg">
          <div class="modal-content">
              <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                  <h4 class="modal-title" id="myLargeModalLabel">Payment</h4>
              </div>
              <div class="modal-body">
                  <div class="row">
                      <div class="col-md-4">
                          <div class="list-group">
                              <a href="javascript:void(0)" id="cash" onclick="paymentType = 1" class="list-group-item active">
                                  Cash
                              </a>
                            <a href="javascript:void(0)" id="card" onclick="paymentType = 3" class="list-group-item">Card</a>
                          </div>
                      </div>
                      <div class="col-md-8">
                          <div class="input-group">
                              <span class="input-group-addon" id="basic-addon3">Price <span id="price_curr"></span>
                              <input id="payablePrice" readonly type="number"  class="form-control" aria-describedby="basic-addon3">
                          </div>
                          <br>
                          <div class="input-group">
                              <span class="input-group-addon" id="basic-addon3">Payment  <span id="payment_curr"></span> </span>
                              <input type="text" placeholder="0.0" class="form-control" id="payment" aria-describedby="basic-addon3">
                          </div>
                          <hr>
                          <div class="row">
                              <div class="col-md-9">
                                  <div class="row">
                                      <div class="col-md-3">
                                          <button onclick="$(this).go(1,false);" class="btn btn-success btn-lg btn-block">1</button>
                                      </div>
                                      <div class="col-md-3">
                                          <button onclick="$(this).go(2,false);" class="btn btn-success btn-lg btn-block">2</button>
                                      </div>
                                      <div class="col-md-3">
                                          <button onclick="$(this).go(3,false);" class="btn btn-success btn-lg btn-block">3</button>
                                      </div>
                                      <div class="col-md-3"></div>
                                  </div>
                                  <br>
                                  <div class="row">
                                      <div class="col-md-3">
                                          <button onclick="$(this).go(4,false);" class="btn btn-success btn-lg btn-block">4</button>
                                      </div>
                                      <div class="col-md-3">
                                          <button onclick="$(this).go(5,false);" class="btn btn-success btn-lg btn-block">5</button>
                                      </div>
                                      <div class="col-md-3">
                                          <button onclick="$(this).go(6,false);" class="btn btn-success btn-lg btn-block">6</button>
                                      </div>
                                      <div class="col-md-3"></div>
                                  </div>
                                  <br>
                                  <div class="row">
                                      <div class="col-md-3">
                                          <button onclick="$(this).go(7,false);" class="btn btn-success btn-lg btn-block">7</button>
                                      </div>
                                      <div class="col-md-3">
                                          <button onclick="$(this).go(8,false);" class="btn btn-success btn-lg btn-block">8</button>
                                      </div>
                                      <div class="col-md-3">
                                          <button onclick="$(this).go(9,false);" class="btn btn-success btn-lg btn-block">9</button>
                                      </div>
                                      <div class="col-md-3"></div>
                                  </div>
                                  <br>
                                  <div class="row">
                                      <div class="col-md-3">
                                          <button onclick="$('#payment').val($('#payment').val().substr(0,$('#payment').val().length -1));$(this).calculateChange();" class="btn btn-success btn-lg btn-block">⌫</button>
                                      </div>
                                      <div class="col-md-3">
                                          <button onclick="$(this).go(0,false);" class="btn btn-success btn-lg btn-block">0</button>
                                      </div>
                                      <div class="col-md-3">
                                          <button onclick="$(this).digits()" class="btn btn-success btn-lg btn-block">.</button>
                                      </div>
                                      <div class="col-md-3"></div>
                                  </div>
                              </div>
                              <div class="col-md-3">
                                  <button onclick="$('#payment').val('');$(this).calculateChange();" class="btn btn-danger btn-block btn-lg">AC</button>
                              </div>
                          </div>
                          <br>
                          <div class="input-group" id="cardInfo">
                              <span class="input-group-addon" id="basic-addon3">Card Info </span>
                              <input type="text" class="form-control" id="paymentInfo" aria-describedby="basic-addon3">
                          </div>
                      </div>
                  </div>
              </div>
              <div class="modal-footer">
                  <div class="row">
                      <div class="col-md-6">
                        <div class="btn btn-primary btn-block btn-lg waves-effect waves-light">Change <span id="change_curr"></span><span id="change"></span> </div>
                      </div>
                      <div class="col-md-6">
                        <button type="button" id="confirmPayment" class="btn btn-default btn-block btn-lg waves-effect waves-light">Confirm Payment</button>
                    </div>
                  </div>
                  
                  
              </div>
          </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
  
  <div id="newCustomer" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="display: none;">
      <div class="modal-dialog modal-sm">
          <div class="modal-content">
              <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                  <h4 class="modal-title" id="mySmallModalLabel">New Customer
                      <!-- <img  class="loading m-t-5" style="margin-left: 35%" height="50px" src="assets/images/loading.gif" alt=""> -->
                  </h4>
              </div>
              <div class="modal-body">
                  <form id="saveCustomer" data-parsley-validate>
                      <div class="form-group">
                          <label for="userName">Customer Name*</label>
                          <input type="text" required="required"  name="name" parsley-trigger="change" placeholder="Enter name" class="form-control" id="userName">
                      </div>
                      <div class="form-group">
                          <label for="userName">Customer Phone</label>
                          <input type="text" name="phone" parsley-trigger="change" placeholder="Enter Phone number" class="form-control" id="phoneNumber">
                      </div>
                      <div class="form-group">
                          <label for="userName">Customer Email</label>
                          <input type="email" name="email" parsley-trigger="change" placeholder="Enter email address" class="form-control" id="emailAddress">
                      </div>
                      <div class="form-group">
                          <label for="userName">Customer Address</label>
                          <input type="text" name="address" parsley-trigger="change" placeholder="Enter address" class="form-control" id="userAddress">
                      </div>

                      <input type="submit" class="btn btn-primary btn-block waves-effect waves-light">
                  </form>
              </div>
          </div>
      </div>
  </div>



  <div id="newProduct" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="mySmallModalLabel">Add Product
                        <!-- <img  class="loading m-t-5" style="margin-left: 35%" height="50px" src="assets/images/loading.gif" alt=""> -->
                    </h4>
                </div>
                <div class="modal-body">
                    <form id="saveProduct" encType="multipart/form-data" action="http://localhost:5000/submit-form" method="post">
                        <input type="hidden" name="id" id="product_id">
                        <input type="hidden" name="img" id="img">
                        <input type="hidden" name="remove" id="remove_img">
                        <div class="form-group">
                            <label for="userName">Category</label>
                            <select name="category" class="form-control" id="category"></select>
                        </div>
                        <div class="form-group">
                            <label for="userName">Product Name</label>
                            <input type="text"   name="name" parsley-trigger="change" placeholder="Enter a product name" class="form-control" id="productName">
                        </div>
                        <div class="form-group">
                            <label for="userName">Price</label>
                            <input type="text" required="required" name="price" placeholder="Price" class="form-control" id="product_price">
                        </div>
                        <div class="form-group">
                            <label for="userName">Stock</label>
                            <input type="text" name="quantity" placeholder="Available stock" class="form-control" id="quantity">
                        </div>
                        <div class="form-group">
                            <label><input type="checkbox" name="stock" id="stock" style="max-width: 30px; float: left;">  Disable stock check </label>
                        </div>
                        <div class="form-group">
                            <label for="userName"><span id="rmv_img" class="btn btn-xs btn-warning">Remove</span> Picture </label>                      
                            <div id="current_img"></div>
                            <input type="file" name="imagename" id="imagename">                            
                        </div>
  
                        <input type="submit" id="submitProduct" class="btn btn-primary btn-block waves-effect waves-light">
                    </form>
                </div>
            </div>
        </div>
    </div>


    <div id="newCategory" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="display: none;">
            <div class="modal-dialog modal-md">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title" id="mySmallModalLabel">Category
                            <!-- <img  class="loading m-t-5" style="margin-left: 35%" height="50px" src="assets/images/loading.gif" alt=""> -->
                        </h4>
                    </div>
                    <div class="modal-body">
                        <form id="saveCategory">
                            <div class="form-group">
                                <label for="userName">Name</label>
                                <input id="category_id" type="hidden" name="id">
                                <input id="categoryName" type="text" required="required"  name="name" placeholder="Enter a category name" class="form-control" >
                            </div>
                          
                            <input type="submit" id="submitCategory" class="btn btn-primary btn-block waves-effect waves-light">
                        </form>
                    </div>
               </div>
          </div>
     </div>


<!-- Products -->
     <div id="Products" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="display: none;">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title" id="mySmallModalLabel">Products
                            <!-- <img  class="loading m-t-5" style="margin-left: 35%" height="50px" src="assets/images/loading.gif" alt=""> -->
                            <button class="btn btn-white pull-right" id="print_list">Download</button>
                        </h4>                        
                    </div>
                     <div class="modal-body" id="all_products" style="padding: 20px; padding-right: 40px;"> 
                        <table class="table table-bordered" id="productList">
                            <thead>
                                <tr>                                                                      
                                    <th>Barcode</th>
                                    <th>Item</th>
                                    <th>Name</th>                                      
                                    <th>Price</th>
                                    <th>Stock</th>
                                    <th>Category</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="product_list"></tbody>
                        </table>

                    </div>
               </div>
          </div>
     </div>




     <div id="Users" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="mySmallModalLabel">Users
                        <!-- <img  class="loading m-t-5" style="margin-left: 35%" height="50px" src="assets/images/loading.gif" alt=""> -->
                     </h4>                        
                </div>
                 <div class="modal-body" id="all_userss" style="padding: 20px; padding-right: 40px;"> 
                    <table class="table table-bordered" id="userList">
                        <thead>
                            <tr>                                                                      
                                <th>Name</th>                                      
                                <th>Username</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="user_list"></tbody>
                    </table>

                </div>
           </div>
      </div>
 </div>




     <div id="Categories" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="display: none;">
            <div class="modal-dialog modal-md">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title" id="mySmallModalLabel">Categories
                            <!-- <img  class="loading m-t-5" style="margin-left: 35%" height="50px" src="assets/images/loading.gif" alt=""> -->
                        </h4>
                    </div>
                    <div class="modal-body">
                        <table class="table table-bordered" id="categoryList">
                            <thead>
                                <tr> 
                                    <th>Name</th>                                      
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="category_list"></tbody>
                        </table>

                    </div>
               </div>
          </div>
     </div>



     <div id="userModal" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="mySmallModalLabel">Account Infomarion
                        <!-- <img  class="loading m-t-5" style="margin-left: 35%" height="50px" src="assets/images/loading.gif" alt=""> -->
                    </h4>
                </div>
                <div class="modal-body">
                    <form id="saveUser" data-parsley-validate>
                        <input type="hidden" name="id" id="user_id">
                        <div class="form-group">
                            <label for="userName">Name*</label>
                            <input type="text" required="required"  name="fullname" parsley-trigger="change" placeholder="Enter name" class="form-control" id="fullname">
                        </div>
                        <div class="form-group">
                            <label for="userName">Username*</label>
                            <input type="text" name="username" parsley-trigger="change" placeholder="Login Username" class="form-control" id="username">
                        </div>
                        <div class="form-group">
                            <label for="userName">Password</label>
                            <input type="password" name="password" parsley-trigger="change" placeholder="Password" class="form-control" id="password">
                        </div>
                        <div class="form-group">
                            <label for="userName">Repeat Password</label>
                            <input type="password" name="pass" parsley-trigger="change" placeholder="Repeat" class="form-control" id="pass">
                        </div>

                        <div class="perms">

                            <h4 style="font-size: 22px; margin-top: 20px;">Permissions</h4>
                            <hr>
    
                            <div class="form-group">
                                  <span><input type="checkbox" name="perm_products" id="perm_products"> Manage Products and Stock </span>
                            </div>
                            <div class="form-group">
                                <span><input type="checkbox" name="perm_categories" id="perm_categories"> Manage Product Categories </span>
                          </div>
                          <div class="form-group">
                            <span><input type="checkbox" name="perm_transactions" id="perm_transactions"> View Transactions </span>
                           </div>
                                <div class="form-group">
                                    <span><input type="checkbox" name="perm_users" id="perm_users"> Manage Users and Permissions </span>
                            </div>
                            <div class="form-group">
                                <span><input type="checkbox" name="perm_settings" id="perm_settings"> Manage Settings </span>
                            </div>
    
                        </div>
           
                        <input type="submit" class="btn btn-primary btn-block waves-effect waves-light">
                    </form>
                </div>
           </div>
      </div>
 </div>





 <div id="holdOrdersModal" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="myLargeModalLabel">Open Orders</h4>
            </div>
            <div class="modal-body">
                <input type="text" id="holdOrderInput" placeholder="Search order by reference" class="holdOrderInput form-control">
                <div class="holdOrderKeyboard"></div>
                <br>
                <div class="row" style="height: 460px;overflow-x: hidden;overflow-y:scroll" id="randerHoldOrders">
                    <p>please wait <span class="dot"></span> </p>  
                </div>
            </div>
        </div>
    </div>
</div>




 
<div id="customerModal" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="myLargeModalLabel">Customer Orders</h4>
            </div>
            <div class="modal-body">
                <input type="text" id="holdCustomerOrderInput" placeholder="Search order by customer name" class="holdCustomerOrderInput form-control">
                <div class="customerOrderKeyboard"></div>
                <br>
                <div class="row" style="height: 460px; overflow: scroll;" id="randerCustomerOrders">
                    <p>please wait <span class="dot"></span> </p>
                </div>
            </div>
        </div>
    </div>
</div>




<div id="orderModal" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button class="btn btn-sm btn-default" onclick="$(this).print()">Print</button> <br> <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
              </div>
            <div class="modal-body" id="viewTransaction">                 
            </div>

            <div class="alert alert-danger" style="font-size:11px;">Right-Click and Reload if you get stuck after cancelling a print.</div>
        </div>
    </div>
</div>


     <div id="settingsModal" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="display: none;">
            <div class="modal-dialog modal-md">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title" id="mySmallModalLabel">Settings
                            <!-- <img  class="loading m-t-5" style="margin-left: 35%" height="50px" src="assets/images/loading.gif" alt=""> -->
                        </h4>
                    </div>
                    <div class="modal-body">  
                        
                        
                        <div class="form-group">
                        <label for="app">Application</label>
                        <select name="app" id="app" class="form-control">
                            <option>Standalone Point of Sale</option>
                            <option>Network Point of Sale Terminal</option>
                            <option>Network Point of Sale Server</option>                                            
                        </select>
                 </div>

                <form id="net_settings_form">
                 <div class="row">
                    <div class="form-group">
                        <label for="userName">Server IP Address*</label>
                        <input type="text" required="required" placeholder="Enter the IP address of the admin computer." name="ip" class="form-control" id="ip">
                    </div>
                    <div class="row">
                            <div class="col-md-5">
                                <div class="form-group">
                                    <label for="userName">Till Number*</label>
                                    <input type="text" required="required" placeholder="Enter a number" name="till" class="form-control" id="till">
                                </div>
                            </div>
                            <div class="col-md-7">
                                <div class="form-group">
                                    <label for="userName">Hardware Identification Number </label>
                                    <input type="text" required="required" name="mac" class="form-control" id="mac" readonly="readonly">
                                </div>
                            </div>
                    </div>
                     <div class="form-group">
                        <input id="save_settings" type="submit" class="btn btn-default btn-block waves-effect waves-light" value="Save Settings">
                    </div>
                 </div>
                </form>
              


                 <form id="settings_form" encType="multipart/form-data">

                    <input type="hidden" name="id" id="settings_id">
                    <input type="hidden" name="img" id="logo_img">
                    <input type="hidden" name="remove" id="remove_logo">

                        <div class="row">
                            <div class="col-md-6">
                               
                                 <div class="form-group">
                                    <label for="userName">Store Name</label>
                                    <input type="text" required="required"  name="store" class="form-control" id="store">
                                 </div>
                                 <div class="form-group">
                                        <label for="userName">Address Line 1</label>
                                        <input type="text" required="required"  name="address_one" class="form-control" id="address_one">
                                 </div>
                                 <div class="form-group">
                                        <label for="userName">Address Line 2</label>
                                        <input type="text" required="required"  name="address_two" class="form-control" id="address_two">
                                 </div>
                                 <div class="form-group">
                                        <label for="userName">Contact Number</label>
                                        <input type="text" name="contact" class="form-control" id="contact">
                                 </div>
                                 <div class="form-group">
                                        <label for="userName">Vat Number</label>
                                        <input type="text" name="tax" parsley-trigger="change" class="form-control" id="tax">
                                 </div>
                              

                            </div>
                            <div class="col-md-6">
                                    <div class="form-group">
                                            <label for="userName">Currency Symbol</label>
                                            <input type="text" required="required"  name="symbol" class="form-control" id="symbol">
                                     </div>
    
                                     <div class="form-group">
                                            <label for="userName">Vat Percentage</label>
                                            <div style="width: 80%; float:left;">
                                            <input type="text" required="required"  name="percentage" class="form-control" id="percentage">
                                            </div>
                                            <div class="pull-right p-t-10"> % </div>
                                     </div>
                                     <br><br>
                                     <div class="form-group">
                                        <label><input type="checkbox" name="charge_tax" id="charge_tax"> Charge Vat</label>
                                     </div>
                                     <div class="form-group">       
                                        <label for="userName"><span id="rmv_logo" class="btn btn-xs btn-warning">Remove</span> Logo </label>              
                                        <div id="current_logo"></div>                                        
                                       
                                        <input type="file" name="imagename" id="logoname">                            
                                    </div>
                                    <div class="form-group">
                                        <label for="userName">Receipt Footer</label>
                                        <textarea name="footer" class="form-control" id="footer"></textarea>
                                    </div>                                    
                            </div>
                           
                        </div>

                       
                        <div class="form-group">
                                <input id="save_settings" type="submit" class="btn btn-default btn-block waves-effect waves-light" value="Save Settings">
                        </div>

                    </form>
                    </div>
               </div>
          </div>
     </div>

  </div>

</div>

<script> window.$ = window.jQuery = require('jquery'); </script>

<script> 


require('./renderer.js');

    </script>

    <script src="assets/plugins/bootstrap/bootstrap.min.js"></script>
    <script src="assets/plugins/chosen/chosen.jquery.min.js"></script>
    <script src="assets/plugins/jquery-ui/jquery.form.min.js"></script>
    <script src="assets/plugins/daterangepicker/daterangepicker.min.js"></script>
    <script src="assets/plugins/dataTables/jquery.dataTables.min.js"></script>
    <script src="assets/plugins/dataTables/jquery.dataTables.bootstrap.js"></script>
    <script src="assets/plugins/dataTables/dataTables.buttons.min.js"></script>
    <script src="assets/plugins/dataTables/buttons.html5.min.js"></script>
    <script src="assets/plugins/dataTables/pdfmake.min.js"></script>
    <script src="assets/plugins/dataTables/vfs_fonts.js"></script>
     <script src="assets/plugins/jquery-ui/jquery-ui.min.js"></script>
    <script src="assets/plugins/jq-keyboard/jqkeyboard-min.js"></script>
    <script src="assets/plugins/jq-keyboard/jqk.layout.en.js"></script>
    <script src="assets/plugins/onscreen-keyboard/jquery.caret.min.js"></script> 

    
    <script>

    $(function () {
     "use strict";
        jqKeyboard.init({
            icon: "light"
          });
     });
 

     $('.holdOrderKeyboard').onscreenKeyboard({
	    allowTypingClass: 'holdOrderInput'
      });


      $('.customerOrderKeyboard').onscreenKeyboard({
	    allowTypingClass: 'holdCustomerOrderInput'
      });

     </script>
      



      <script>

          // Make a POST request to your backend with JSON data
          axios
            .post("http://localhost:5000/submit-form", formData)
            .then((response) => {
              // Handle the response from the server, if needed
              console.log(response.data);
            })
            .catch((error) => {
              // Handle any errors that occurred during the request
              console.error(error);
            });
       
    </script>
    <script>
      // Fetch product data from the server
      const products = [
        {
          name: "Scaffoldings",
          id: "SCA001",
          price: 50.0,
          stock: 50,
        },
        {
          name: "Drills",
          id: "DRI001",
          price: 1000.0,
          stock: 3,
        },
        {
          name: "Acro Jack",
          id: "AJ001",
          price: 10.0,
          stock: 500,
        },
        {
          name: "Router",
          id: "ROU001",
          price: 500.0,
          stock: 4,
        },
        {
          name: "Hilti",
          id: "HIL001",
          price: 1500.0,
          stock: 2,
        },
        {
          name: "Water Motor",
          id: "WM001",
          price: 2000.0,
          stock: 3,
        },
        {
          name: "Concrete Mixer",
          id: "CM001",
          price: 5000.0,
          stock: 1,
        },
        {
          name: "Ladders",
          id: "LAD001",
          price: 100.0,
          stock: 10,
        },
        {
          name: "Compressor",
          id: "COM001",
          price: 2500.0,
          stock: 2,
        },
        {
          name: "High Pressure Washer",
          id: "HPW001",
          price: 1500.0,
          stock: 2,
        },
        {
          name: "Concrete Hoist",
          id: "CH001",
          price: 1500.0,
          stock: 1,
        },
        {
          name: "Wire Cord",
          id: "WC001",
          price: 500.0,
          stock: 3,
        },
        {
          name: "Welding Plant",
          id: "WP001",
          price: 1000.0,
          stock: 5,
        },
        // Add more products here
      ];
      // axios
      //   .get("/products")
      //   .then((response) => {
      //     const products = response.data;

      //     // Add product rows to the table (similar to the previous example)
      //     const productTable = document.getElementById("productTable");
      //     products.forEach((product) => {
      //       productTable.appendChild(createTableRow(product));
      //     });
      //   })
      //   .catch((error) => {
      //     console.error(error);
      //   });

      // Function to create a table row for a product
      function createTableRow(product) {
        const row = document.createElement("tr");
        row.innerHTML = `
    <td>${product.name}</td>
    <td>${product.id}</td>
    <td>Rs.${product.price}</td>
    <td>${product.stock}</td>

    <td>
      <input type="number" id="${product.id}-quantity" value="0" min="0" max="${product.stock}">
    </td>
    <td>
      <button class="add-button" data-product-id="${product.id}">ADD</button>

    </td>
  `;

        return row;
      }

      // Add product rows to the table
      const productTable = document.getElementById("productTable");
      products.forEach((product) => {
        productTable.appendChild(createTableRow(product));
      });
// Add event listeners for ADD buttons
document.querySelectorAll(".add-button").forEach((button) => {
  button.addEventListener("click", () => {
    const productId = button.getAttribute("data-product-id");
    const product = products.find((p) => p.id === productId);
    const quantityInput = document.getElementById(`${productId}-quantity`);
    const selectedProductsTable = document.getElementById("selected-products");
    
    if (product) {
      const quantity = parseInt(quantityInput.value, 10);
      
      if (quantity > 0 && quantity <= product.stock) {
        const selectedProductRow = document.createElement("tr");
        product.stock =product.stock - quantity;
        const totalPrice = quantity * product.price;

        selectedProductRow.innerHTML = `
          <td>${product.id}</td>
          <td>${product.name}</td>
          <td>${quantity}</td>
          <td>Rs${product.price}</td>
          <td>Rs${totalPrice}</td>
          <td><button class="cancel-button" data-product-id="${product.id}">Cancel</button></td>
        `;

        selectedProductsTable.appendChild(selectedProductRow);

        // Reduce the selected quantity from the stock
       

        // Reset the quantity input to 0
        quantityInput.value = 0;
         
        // Add event listener for the cancel button on the selected product row
        const cancelButton = selectedProductRow.querySelector(".cancel-button");
        cancelButton.addEventListener("click", () => {
          // Remove the selected product row
          selectedProductsTable.removeChild(selectedProductRow);

          // Restore the stock for the canceled product
          product.stock += quantity;
        });

      } else {
        alert("Invalid quantity. Please enter a valid quantity.");
      }
    }
     // Call calculateCart after adding a product to update the total immediately
     calculateCart();
  });
});

// Function to calculate the cart total and update display
function calculateCart() {
  const selectedProducts = document.querySelectorAll("#selected-products tr");
  let totalItems = 0;
  let totalPrice = 0;

  selectedProducts.forEach((productRow) => {
    const quantity = parseInt(productRow.querySelector("td:nth-child(3)").textContent, 10);
    const price = parseFloat(productRow.querySelector("td:nth-child(4)").textContent.replace("Rs", ""));
    const total = quantity * price;

    totalItems += quantity;
    totalPrice += total;
  });
  
  
  const inputDiscount = parseFloat(document.getElementById("inputDiscount").value) || 0;
  const grossPrice = totalPrice - inputDiscount;

  document.getElementById("total").textContent = totalItems;
  document.getElementById("price").textContent = totalPrice.toFixed(2);
  document.getElementById("gross_price").textContent = grossPrice.toFixed(2);
}

// Initialize the cart calculations when the page loads
calculateCart();




    </script>
  </body>
</html>